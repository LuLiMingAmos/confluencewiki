(function(f){AJS.Confluence.Analytics=AJS.Confluence.Analytics||{};var g=/([^\?]+)[\?]?([^#]*)[#]?(.*)/;var c=["source","urlPath","queryParams","anchor"];var b;var i;function j(o){var n={};var q=g.exec(o);if(q){for(var p=0;p<c.length;p++){n[c[p]]=q[p]}n.queryParams=d(n.queryParams)}return n}function k(n){if(f.isEmptyObject(n)){return""}else{return(!n.urlPath?"":n.urlPath)+(f.isEmptyObject(n.queryParams)?"":"?"+m(n.queryParams))+(!n.anchor?"":"#"+n.anchor)}}function d(r){var q={};if(r){var p=r.split("&");for(var o=0;o<p.length;o++){var n=p[o].split("=");if(!q[n[0]]){q[n[0]]=[]}q[n[0]].push(p[o].substring(n[0].length+1))}}return q}function m(o){var q="";for(var p in o){for(var n=0;n<o[p].length;n++){q+="&"+p;if(o[p][n]){q+="="+o[p][n]}}}return q.substring(1)}function a(o,p){var n=j(o);if(!f.isEmptyObject(n)){n.queryParams.src=[p]}return k(n)}function e(){if("undefined"===typeof b){b=f('script[src$="/ga.js"]').length>0}return b}function h(){if("undefined"===typeof i){var n=f._data(window,"events");i=n.analytics&&n.analytics.length>0}return i}function l(){if(e()){if(_gaq){_gaq.push(function(){window.history.replaceState(null,"",AJS.Confluence.Analytics.srcRemovedUrl(document.URL))})}else{AJS.log("ERROR: Could not queue src parameter URL clean up task: _gaq is not defined but Google Analytics is activated.")}}else{window.history.replaceState(null,"",AJS.Confluence.Analytics.srcRemovedUrl(document.URL))}}AJS.Confluence.Analytics.setAnalyticsSource=function(n,o){if(e()||h()){n.attr("href",function(q,p){return a(p,encodeURIComponent(o))})}};AJS.Confluence.Analytics.srcRemovedUrl=function(o){var n=j(o);delete n.queryParams.src;return k(n)};AJS.Confluence.Analytics.srcParamValues=function(n){var o=j(n).queryParams;return o&&o.src?o.src:[]};AJS.toInit(function(p){var n=AJS.Confluence.Analytics.srcParamValues(document.URL);for(var o=0;o<n.length;o++){AJS.trigger("analytics",{name:"confluence.viewpage.src."+n[o]})}if(window.history&&window.history.replaceState){l()}})}(AJS.$));